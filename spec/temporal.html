<!DOCTYPE html>
<meta charset="utf8">

<emu-clause id="sec-temporal-objects">
  <h1>The Temporal Object</h1>
  <p>The Temporal object:</p>
  <ul>
    <li>is the intrinsic object <dfn>%Temporal%</dfn>.</li>
    <li>is the initial value of the *"Temporal"* property of the global object.</li>
    <li>is an ordinary object.</li>
    <li>has a [[Prototype]] internal slot whose value is %Object.prototype%.</li>
    <li>is not a function object.</li>
    <li>does not have a [[Construct]] internal method; it cannot be used as a constructor with the `new` operator.</li>
    <li>does not have a [[Call]] internal method; it cannot be invoked as a function.</li>
  </ul>

  <emu-clause id="sec-value-properties-of-the-temporal-object">
    <h1>Value Properties of the Temporal Object</h1>
    <emu-clause id="sec-temporal-@@tostringtag">
      <h1>Temporal [ @@toStringTag ]</h1>
      <p>The initial value of the @@toStringTag property is the String value *"Temporal"*.</p>
      <p>This property has the attributes { [[Writable]]: *false*, [[Enumerable]]: *false*, [[Configurable]]: *true* }.</p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-constructor-properties-of-the-temporal-object">
    <h1>Constructor Properties of the Temporal Object</h1>
    <emu-clause id="sec-temporal-calendar">
      <h1>Temporal.Calendar ( . . . )</h1>
      <p>See <emu-xref href="#sec-temporal-calendar-objects"></emu-xref>.</p>
    </emu-clause>
    <emu-clause id="sec-temporal-instant">
      <h1>Temporal.Instant ( . . . )</h1>
      <p>See <emu-xref href="#sec-temporal-instant-objects"></emu-xref>.</p>
    </emu-clause>
    <emu-clause id="sec-temporal-plaindatetime">
      <h1>Temporal.PlainDateTime ( . . . )</h1>
      <p>See <emu-xref href="#sec-temporal-plaindatetime-objects"></emu-xref>.</p>
    </emu-clause>
    <emu-clause id="sec-temporal-plaindate">
      <h1>Temporal.PlainDate ( . . . )</h1>
      <p>See <emu-xref href="#sec-temporal-plaindate-objects"></emu-xref>.</p>
    </emu-clause>
    <emu-clause id="sec-temporal-plaintime">
      <h1>Temporal.PlainTime ( . . . )</h1>
      <p>See <emu-xref href="#sec-temporal-plaintime-objects"></emu-xref>.</p>
    </emu-clause>
    <emu-clause id="sec-temporal-plainyearmonth">
      <h1>Temporal.PlainYearMonth ( . . . )</h1>
      <p>See <emu-xref href="#sec-temporal-plainyearmonth-objects"></emu-xref>.</p>
    </emu-clause>
    <emu-clause id="sec-temporal-plainmonthday">
      <h1>Temporal.PlainMonthDay ( . . . )</h1>
      <p>See <emu-xref href="#sec-temporal-plainmonthday-objects"></emu-xref>.</p>
    </emu-clause>
    <emu-clause id="sec-temporal-timezone">
      <h1>Temporal.TimeZone ( . . . )</h1>
      <p>See <emu-xref href="#sec-temporal-timezone-objects"></emu-xref>.</p>
    </emu-clause>
    <emu-clause id="sec-temporal-duration">
      <h1>Temporal.Duration ( . . . )</h1>
      <p>See <emu-xref href="#sec-temporal-duration-objects"></emu-xref>.</p>
    </emu-clause>
    <emu-clause id="sec-temporal-zoneddatetime">
      <h1>Temporal.ZonedDateTime ( . . . )</h1>
      <p>See <emu-xref href="#sec-temporal-zoneddatetime-objects"></emu-xref>.</p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-other-properties-of-the-temporal-object">
    <h1>Other Properties of the Temporal Object</h1>
    <emu-clause id="sec-temporal-now">
      <h1>Temporal.Now</h1>
      <p>See <emu-xref href="#sec-temporal-now-object"></emu-xref>.</p>
    </emu-clause>
  </emu-clause>
</emu-clause>

<emu-clause id="sec-temporal-now-object">
  <h1>The Temporal.Now Object</h1>
  <p>The Temporal.Now object:</p>
  <ul>
    <li>is an ordinary object.</li>
    <li>has a [[Prototype]] internal slot whose value is %Object.prototype%.</li>
    <li>is not a function object.</li>
    <li>does not have a [[Construct]] internal method; it cannot be used as a constructor with the `new` operator.</li>
    <li>does not have a [[Call]] internal method; it cannot be invoked as a function.</li>
  </ul>

  <emu-clause id="sec-value-properties-of-the-temporal-now-object">
    <h1>Value Properties of the Temporal.Now Object</h1>
    <emu-clause id="sec-temporal-now-@@tostringtag">
      <h1>Temporal.Now [ @@toStringTag ]</h1>
      <p>The initial value of the @@toStringTag property is the String value *"Temporal.Now"*.</p>
      <p>This property has the attributes { [[Writable]]: *false*, [[Enumerable]]: *false*, [[Configurable]]: *true* }.</p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-function-properties-of-the-temporal-now-object">
    <h1>Function Properties of the Temporal.Now Object</h1>

    <emu-clause id="sec-temporal.now.timezoneid">
      <h1>Temporal.Now.timeZoneId ( )</h1>
      <p>
        This function performs the following steps when called:
      </p>
      <emu-alg>
        1. Return SystemTimeZoneIdentifier().
      </emu-alg>
    </emu-clause>

    <emu-clause id="sec-temporal.now.instant">
      <h1>Temporal.Now.instant ( )</h1>
      <p>
        This function performs the following steps when called:
      </p>
      <emu-alg>
        1. Return SystemInstant().
      </emu-alg>
    </emu-clause>

    <emu-clause id="sec-temporal.now.plaindatetimeiso">
      <h1>Temporal.Now.plainDateTimeISO ( [ _temporalTimeZoneLike_ ] )</h1>
      <p>
        This function performs the following steps when called:
      </p>
      <emu-alg>
        1. Return ? SystemDateTime(_temporalTimeZoneLike_, *"iso8601"*).
      </emu-alg>
    </emu-clause>

    <emu-clause id="sec-temporal.now.zoneddatetimeiso">
      <h1>Temporal.Now.zonedDateTimeISO ( [ _temporalTimeZoneLike_ ] )</h1>
      <p>
        This function performs the following steps when called:
      </p>
      <emu-alg>
        1. Return ? SystemZonedDateTime(_temporalTimeZoneLike_, *"iso8601"*).
      </emu-alg>
    </emu-clause>

    <emu-clause id="sec-temporal.now.plaindateiso">
      <h1>Temporal.Now.plainDateISO ( [ _temporalTimeZoneLike_ ] )</h1>
      <p>
        This function performs the following steps when called:
      </p>
      <emu-alg>
        1. Let _dateTime_ be ? SystemDateTime(_temporalTimeZoneLike_, *"iso8601"*).
        1. Return ! CreateTemporalDate(_dateTime_.[[ISOYear]], _dateTime_.[[ISOMonth]], _dateTime_.[[ISODay]], *"iso8601"*).
      </emu-alg>
    </emu-clause>

    <emu-clause id="sec-temporal.now.plaintimeiso">
      <h1>Temporal.Now.plainTimeISO ( [ _temporalTimeZoneLike_ ] )</h1>
      <p>
        This function performs the following steps when called:
      </p>
      <emu-alg>
        1. Let _dateTime_ be ? SystemDateTime(_temporalTimeZoneLike_, *"iso8601"*).
        1. Return ! CreateTemporalTime(_dateTime_.[[ISOHour]], _dateTime_.[[ISOMinute]], _dateTime_.[[ISOSecond]], _dateTime_.[[ISOMillisecond]], _dateTime_.[[ISOMicrosecond]], _dateTime_.[[ISONanosecond]]).
      </emu-alg>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-temporal-now-abstract-ops">
    <h1>Abstract Operations</h1>

    <emu-clause id="sec-hostsystemutcepochnanoseconds" type="host-defined abstract operation">
      <h1>
        HostSystemUTCEpochNanoseconds (
          _global_: a global object
        ): an integer
      </h1>
      <dl class="header">
        <dt>description</dt>
        <dd>
          It allows host environments to reduce the precision of the result.
          In particular, web browsers artificially limit it to prevent abuse of security flaws
          (e.g., Spectre) and to avoid certain methods of fingerprinting.
        </dd>
      </dl>
      <p>An implementation of HostSystemUTCEpochNanoseconds must conform to the following requirements:</p>
      <ul>
        <li>Its result must be between nsMinInstant and nsMaxInstant.</li>
      </ul>
      <emu-note>
        <p>
          This requirement is necessary if the system clock is set to a time outside the range that Temporal.Instant can represent.
          This is not expected to affect implementations in practice.
        </p>
      </emu-note>
      <p>The default implementation of HostSystemUTCEpochNanoseconds performs the following steps when called:</p>
      <emu-alg>
        1. Let _ns_ be the approximate current UTC date and time, in nanoseconds since the epoch.
        1. Return the result of clamping _ns_ between nsMinInstant and nsMaxInstant.
      </emu-alg>
      <p>ECMAScript hosts that are not web browsers must use the default implementation of HostSystemUTCEpochNanoseconds.</p>
    </emu-clause>

    <emu-clause id="sec-temporal-systemutcepochmilliseconds" type="abstract operation">
      <h1>
        SystemUTCEpochMilliseconds (
        ): a Number
      </h1>
      <dl class="header">
        <dt>description</dt>
        <dd></dd>
      </dl>
      <emu-alg>
        1. Let _global_ be GetGlobalObject().
        1. Let _nowNs_ be HostSystemUTCEpochNanoseconds(_global_).
        1. Return ùîΩ(floor(_nowNs_ / 10<sup>6</sup>)).
      </emu-alg>
    </emu-clause>

    <emu-clause id="sec-temporal-systemutcepochnanoseconds" type="abstract operation">
      <h1>
        SystemUTCEpochNanoseconds (
        ): a BigInt
      </h1>
      <dl class="header">
        <dt>description</dt>
        <dd></dd>
      </dl>
      <emu-alg>
        1. Let _global_ be GetGlobalObject().
        1. Let _nowNs_ be HostSystemUTCEpochNanoseconds(_global_).
        1. Return ‚Ñ§(_nowNs_).
      </emu-alg>
    </emu-clause>

    <emu-clause id="sec-temporal-systeminstant" type="abstract operation">
      <h1>
        SystemInstant (
        ): a Temporal.Instant
      </h1>
      <dl class="header">
        <dt>description</dt>
        <dd></dd>
      </dl>
      <emu-alg>
        1. Let _ns_ be SystemUTCEpochNanoseconds().
        1. Return ! CreateTemporalInstant(_ns_).
      </emu-alg>
    </emu-clause>

    <emu-clause id="sec-temporal-systemdatetime" type="abstract operation">
      <h1>
        SystemDateTime (
          _temporalTimeZoneLike_: an ECMAScript language value,
          _calendarLike_: an ECMAScript language value,
        ): either a normal completion containing a Temporal.PlainDateTime or a throw completion
      </h1>
      <dl class="header">
        <dt>description</dt>
        <dd></dd>
      </dl>
      <emu-alg>
        1. If _temporalTimeZoneLike_ is *undefined*, then
          1. Let _timeZone_ be SystemTimeZoneIdentifier().
        1. Else,
          1. Let _timeZone_ be ? ToTemporalTimeZoneSlotValue(_temporalTimeZoneLike_).
        1. Let _calendar_ be ? ToTemporalCalendarSlotValue(_calendarLike_).
        1. Let _instant_ be SystemInstant().
        1. Let _timeZoneRec_ be ? CreateTimeZoneMethodsRecord(_timeZone_, ¬´ ~get-offset-nanoseconds-for~ ¬ª).
        1. Return ? GetPlainDateTimeFor(_timeZoneRec_, _instant_, _calendar_).
      </emu-alg>
    </emu-clause>

    <emu-clause id="sec-temporal-systemzoneddatetime" type="abstract operation">
      <h1>
        SystemZonedDateTime (
          _temporalTimeZoneLike_: an ECMAScript language value,
          _calendarLike_: an ECMAScript language value,
        ): either a normal completion containing a Temporal.ZonedDateTime or a throw completion
      </h1>
      <dl class="header">
        <dt>description</dt>
        <dd></dd>
      </dl>
      <emu-alg>
        1. If _temporalTimeZoneLike_ is *undefined*, then
          1. Let _timeZone_ be SystemTimeZoneIdentifier().
        1. Else,
          1. Let _timeZone_ be ? ToTemporalTimeZoneSlotValue(_temporalTimeZoneLike_).
        1. Let _calendar_ be ? ToTemporalCalendarSlotValue(_calendarLike_).
        1. Let _ns_ be SystemUTCEpochNanoseconds().
        1. Return ! CreateTemporalZonedDateTime(_ns_, _timeZone_, _calendar_).
      </emu-alg>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-temporal-tojson">
    <h1>toJSON ( )</h1>
    <p>This function object is %TemporalToJSON%. It performs the following steps when called:</p>
    <emu-alg>
      1. Let _object_ be the *this* value.
      1. If _object_ has an [[InitializedTemporalCalendar]] internal slot, then
        1. Return _object_.[[Identifier]].
      1. If _object_ has an [[InitializedTemporalDuration]] internal slot, then
        1. Let _normSeconds_ be NormalizeTimeDuration(0, 0, _object_.[[Seconds]], _object_.[[Milliseconds]], _object_.[[Microseconds]], _object_.[[Nanoseconds]]).
        1. Return TemporalDurationToString(_object_.[[Years]], _object_.[[Months]], _object_.[[Weeks]], _object_.[[Days]], _object_.[[Hours]], _object_.[[Minutes]], _normSeconds_, *"auto"*).
      1. If _object_ has an [[InitializedTemporalInstant]] internal slot, then
        1. Return ? TemporalInstantToString(_object_, *undefined*, *"auto"*).
      1. If _object_ has an [[InitializedTemporalDate]] internal slot, then
        1. Return ? TemporalDateToString(_object_, *"auto"*).
      1. If _object_ has an [[InitializedTemporalDateTime]] internal slot, then
        1. Return ? TemporalDateTimeToString(_object_.[[ISOYear]], _object_.[[ISOMonth]], _object_.[[ISODay]], _object_.[[ISOHour]], _object_.[[ISOMinute]], _object_.[[ISOSecond]], _object_.[[ISOMillisecond]], _object_.[[ISOMicrosecond]], _object_.[[ISONanosecond]], _object_.[[Calendar]], *"auto"*, *"auto"*).
      1. If _object_ has an [[InitializedTemporalMonthDay]] internal slot, then
        1. Return ? TemporalMonthDayToString(_object_, *"auto"*).
      1. If _object_ has an [[InitializedTemporalTime]] internal slot, then
        1. Return TemporalTimeToString(_object_.[[ISOHour]], _object_.[[ISOMinute]], _object_.[[ISOSecond]], _object_.[[ISOMillisecond]], _object_.[[ISOMicrosecond]], _object_.[[ISONanosecond]], *"auto"*).
      1. If _object_ has an [[InitializedTemporalYearMonth]] internal slot, then
        1. Return ? TemporalYearMonthToString(_object_, *"auto"*).
      1. If _object_ has an [[InitializedTemporalTimeZone]] internal slot, then
        1. If _object_.[[OffsetMinutes]] is not ~empty~, return FormatOffsetTimeZoneIdentifier(_object_.[[OffsetMinutes]]).
        1. Return _object_.[[Identifier]].
      1. If _object_ has an [[InitializedTemporalZonedDateTime]] internal slot, then
        1. Return ? TemporalZonedDateTimeToString(_object_, *"auto"*, *"auto"*, *"auto"*, *"auto"*).
      1. Throw a *TypeError* exception.
    </emu-alg>
  </emu-clause>
</emu-clause>
